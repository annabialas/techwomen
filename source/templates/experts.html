{% macro modal(name,title,affiliation,contact,tags) %}                
     <div class="b-modal">
        <div class="e-content">
            <h4>{{name}}</h4>
            <h5>{{title}}</h5>
            <h5> {{affiliation}}</h5>
            <p id="tags">
                {% for tag in tags %}
                    <a href=""><span class="label label--{% if tag == 'policy' %}policy{% elif tag == 'data' %}data{% else %}global{% endif %}">{{tag}}</span></a>
                {% endfor %}
            </p>
            <h5><a href="{{contact}}" target="_black">Link to Bio<i class="material-icons">launch</i></h5>
            <br>
            <a class="b-button expert-close-modal" href="#">Close</a>
        </div>
    </div>
 {% endmacro %}

{% extends '_base.html' %}
{% block header_logo %}{% endblock %}
{% block main %}
<div class="b-top-section m-purple">
	<h1>Discover Experts</h1>
</div>

<section class="b-page-section">
    <div id="experts-sortable">
    <form class="b-search m-active" action="">
        <input class="fuzzy-search" type="text">
        <input class="material-icons" type="submit" value="search">
    </form>
    <div class="">
        <a href="#" class="b-button m-blue">Policy</a>
        <a href="#" class="b-button m-purple">Data</a>
        <a href="#" class="b-button m-orange">Global</a>
    </div>
	<table>
		<colgroup>
	        <col style="width:25%"/>
	        <col style="width:35%"/>
	       	<col style="width:40%"/>
            <col style="width:0%"/>

    	</colgroup>
    	<thead>
        	<tr>
            	<th scope="col"><span class="sort" data-sort="name">Name <i class="material-icons">keyboard_arrow_down</i></span></th>
            	<th scope="col"><span class="sort" data-sort="post">Title <i class="material-icons">keyboard_arrow_down</i></span></th>
            	<th scope="col"><span class="sort" data-sort="affiliation">Affiliation <i class="material-icons">keyboard_arrow_down</i></span></th>
                <th scope="col" class="sort nodisplay" data-sort="firstname"></th>
        	</tr>
        </thead>
        <tbody class="list">
        {% for i in experts|sort(attribute='lastname')  %}
        	<tr>
        		<td data-target="{{i.lastname}}" class="name">
                    <a class="expert-modal" href="#">{{i.name}}</a>
                    {{modal(i.name,i.title,i.affiliation,i.contact,i.tags)}}
        		</td>
        		<td class="post">
        			{{i.title}}
        		</td>
        		<td class="affiliation">
        			{{i.affiliation}}
        		</td>
                <td class="firstname nodisplay">
                    {{i.firstname}}
                </td>
        	</tr> 
        {% endfor %}  		

	
        </tbody>
    </table>
    </div>
</section>

<script src="http://listjs.com/no-cdn/list.js"></script>
<script src="http://listjs.com/no-cdn/list.fuzzysearch.js"></script>
<script type="text/javascript">

    var options = {
        valueNames: [ { attr: 'data-target', name: 'name'}, 'post', 'affiliation', 'firstname'],
        plugins: [ ListFuzzySearch() ] 
    };

    var contactList = new List('experts-sortable', options);

</script>

{% endblock %}